<!--
This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.

Copyright (c) 2023-present Kaleidos INC
-->

<ng-container *transloco="let t">
  <ng-container *ngIf="workspaceList$ | async as workspaceList">
    <div class="new-project-wrapper">
      <!-- Init Template -->
      <ng-container *ngIf="currentStep === 'init'">
        <tg-init-step
          (templateSelected)="onSelectTemplate($event.step, $event.id)"
          [selectedWorkspaceId]="formData.workspaceId"
          [workspaces]="workspaceList">
        </tg-init-step>
      </ng-container>

      <!-- Blank step -->
      <ng-container *ngIf="currentStep === 'blank'">
        <tg-template-step
          (projectData)="createProject($event)"
          (cancel)="cancelTemplateStep($event)"
          [initialForm]="savedForm"
          [selectedWorkspaceId]="formData.workspaceId"
          [workspaces]="workspaceList">
        </tg-template-step>
      </ng-container>

      <!-- Template step -->
      <ng-container *ngIf="currentStep === 'template'">
        <ng-template [ngTemplateOutlet]="wip"></ng-template>
      </ng-container>

      <!-- Import step -->
      <ng-container *ngIf="currentStep === 'import'">
        <ng-template [ngTemplateOutlet]="wip"></ng-template>
      </ng-container>

      <!-- Duplicate step -->
      <ng-container *ngIf="currentStep === 'duplicate'">
        <ng-template [ngTemplateOutlet]="wip"></ng-template>
      </ng-container>
    </div>
  </ng-container>

  <ng-template #wip>
    <div class="wip-step">
      <p>WIP</p>
      <button
        tuiButton
        type="button"
        (click)="currentStep = 'init'"
        appearance="primary"
        icon="arrow-left">
        {{ t('new_project.wip_step.back') }}
      </button>
    </div>
  </ng-template>
</ng-container>
