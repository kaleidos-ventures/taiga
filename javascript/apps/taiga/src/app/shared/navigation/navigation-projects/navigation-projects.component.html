<!--
This Source Code Form is subject to the terms of the Mozilla Public
License, v. 2.0. If a copy of the MPL was not distributed with this
file, You can obtain one at http://mozilla.org/MPL/2.0/.

Copyright (c) 2021-present Kaleidos Ventures SL
-->

<ng-container *transloco="let t; read: 'navigation_projects'">
  <ng-container *ngIf="latestProjects$ | async as latestProjects">
    <ul
      role="group"
      class="pinned-projects"
      [attr.aria-label]="t('recent_projects')">
      <ng-container *ngIf="latestProjects.length">
        <li
          *ngFor="
            let project of latestProjects;
            trackBy: trackByProject;
            let i = index
          "
          role="none">
          <a
            role="menuitem"
            class="project"
            [routerLink]="['/project', project.id, project.slug]"
            [attr.data-test]="'recent-project-' + i">
            <div class="project-image">
              <tg-ui-avatar
                type="light"
                [color]="project.color"
                [avatarUrl]="project.logoSmall"
                [name]="project.name">
              </tg-ui-avatar>
            </div>
            <div class="project-data">
              <span class="project-name">{{ project.name }} </span>
              <span class="project-workspace">{{
                project.workspace.name
              }}</span>
            </div>
          </a>
        </li>
      </ng-container>
    </ul>

    <ng-container *ngIf="!latestProjects.length">
      <p class="empty-recent">{{ t('empty_recent_projects') }}</p>
    </ng-container>

    <a
      role="menuitem"
      class="view-projects"
      href="">
      {{ t('view_projects') }}
    </a>
    <a
      role="menuitem"
      class="new-project"
      tuiButton
      [routerLink]="['/new-project']"
      type="button"
      icon="plus">
      {{ t('new_project') }}
    </a>
    <ul
      role="group"
      class="organizations"
      [attr.aria-label]="'commons.organizations' | transloco">
      <li role="none">
        <a
          role="menuitem"
          href=""
          >Kaleidos Ventures</a
        >
      </li>
      <li role="none">
        <a
          role="menuitem"
          href=""
          >Kaleidos Open Source organization</a
        >
      </li>
    </ul>
  </ng-container>
</ng-container>
