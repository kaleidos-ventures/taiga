{"version":3,"file":"taiga-ui-cdk-directives-obscured.js","sources":["ng://@taiga-ui/cdk/directives/obscured/obscured.directive.ts","ng://@taiga-ui/cdk/directives/obscured/obscured.module.ts","ng://@taiga-ui/cdk/directives/obscured/taiga-ui-cdk-directives-obscured.ts"],"sourcesContent":["import {Directive, Inject, Input, Optional, Output, Self} from '@angular/core';\nimport {tuiRequiredSetter} from '@taiga-ui/cdk/decorators';\nimport {TuiActiveZoneDirective} from '@taiga-ui/cdk/directives/active-zone';\nimport {\n    TuiDestroyService,\n    TuiObscuredService,\n    TuiParentsScrollService,\n} from '@taiga-ui/cdk/services';\nimport {EMPTY, Observable, Subject} from 'rxjs';\nimport {map, switchMap} from 'rxjs/operators';\n\n/**\n * Directive that monitors element visibility\n */\n@Directive({\n    selector: '[tuiObscured]',\n    providers: [TuiObscuredService, TuiParentsScrollService, TuiDestroyService],\n})\nexport class TuiObscuredDirective {\n    private readonly enabled$ = new Subject<boolean>();\n\n    @Input()\n    @tuiRequiredSetter()\n    set tuiObscuredEnabled(enabled: boolean) {\n        this.enabled$.next(enabled);\n    }\n\n    @Output()\n    readonly tuiObscured: Observable<boolean>;\n\n    constructor(\n        @Optional()\n        @Inject(TuiActiveZoneDirective)\n        activeZone: TuiActiveZoneDirective | null,\n        @Self()\n        @Inject(TuiObscuredService)\n        obscured$: TuiObscuredService,\n    ) {\n        const mapped$ = obscured$.pipe(\n            map(\n                obscuredBy =>\n                    !!obscuredBy &&\n                    (!activeZone ||\n                        !obscuredBy.length ||\n                        obscuredBy.every(element => !activeZone.contains(element))),\n            ),\n        );\n\n        this.tuiObscured = this.enabled$.pipe(\n            switchMap(enabled => (enabled ? mapped$ : EMPTY)),\n        );\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {TuiObscuredDirective} from './obscured.directive';\n\n@NgModule({\n    declarations: [TuiObscuredDirective],\n    exports: [TuiObscuredDirective],\n})\nexport class TuiObscuredModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;;;;;;AAWA;;;IAOa,oBAAoB,GAAjC,MAAa,oBAAoB;IAY7B,YAGI,UAAyC,EAGzC,SAA6B;QAjBhB,aAAQ,GAAG,IAAI,OAAO,EAAW,CAAC;QAmB/C,MAAM,OAAO,GAAG,SAAS,CAAC,IAAI,CAC1B,GAAG,CACC,UAAU,IACN,CAAC,CAAC,UAAU;aACX,CAAC,UAAU;gBACR,CAAC,UAAU,CAAC,MAAM;gBAClB,UAAU,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,CACtE,CACJ,CAAC;QAEF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CACjC,SAAS,CAAC,OAAO,KAAK,OAAO,GAAG,OAAO,GAAG,KAAK,CAAC,CAAC,CACpD,CAAC;KACL;IA5BD,IAAI,kBAAkB,CAAC,OAAgB;QACnC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC/B;EA2BJ;;YAnBmB,sBAAsB,uBAFjC,QAAQ,YACR,MAAM,SAAC,sBAAsB;YAInB,kBAAkB,uBAF5B,IAAI,YACJ,MAAM,SAAC,kBAAkB;;AAZ9B;IAFC,KAAK,EAAE;IACP,iBAAiB,EAAE;8DAGnB;AAGD;IADC,MAAM,EAAE;yDACiC;AAVjC,oBAAoB;IAJhC,SAAS,CAAC;QACP,QAAQ,EAAE,eAAe;QACzB,SAAS,EAAE,CAAC,kBAAkB,EAAE,uBAAuB,EAAE,iBAAiB,CAAC;KAC9E,CAAC;IAcO,WAAA,QAAQ,EAAE,CAAA;IACV,WAAA,MAAM,CAAC,sBAAsB,CAAC,CAAA;IAE9B,WAAA,IAAI,EAAE,CAAA;IACN,WAAA,MAAM,CAAC,kBAAkB,CAAC,CAAA;GAjBtB,oBAAoB,CAkChC;;IC7CY,iBAAiB,GAA9B,MAAa,iBAAiB;EAAG;AAApB,iBAAiB;IAJ7B,QAAQ,CAAC;QACN,YAAY,EAAE,CAAC,oBAAoB,CAAC;QACpC,OAAO,EAAE,CAAC,oBAAoB,CAAC;KAClC,CAAC;GACW,iBAAiB,CAAG;;ACPjC;;;;;;"}