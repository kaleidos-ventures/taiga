{"version":3,"file":"taiga-ui-kit-components-accordion.js","sources":["ng://@taiga-ui/kit/components/accordion/accordion-item/accordion-item-content.directive.ts","ng://@taiga-ui/kit/components/accordion/accordion-item/accordion-item.component.ts","ng://@taiga-ui/kit/components/accordion/accordion.component.ts","ng://@taiga-ui/kit/components/accordion/accordion.module.ts","ng://@taiga-ui/kit/components/accordion/taiga-ui-kit-components-accordion.ts"],"sourcesContent":["import {ChangeDetectorRef, Directive, Inject, Self, TemplateRef} from '@angular/core';\nimport {PolymorpheusTemplate} from '@tinkoff/ng-polymorpheus';\n\n// TODO: do not rebuild the template, think about \"lazy\" flag\n@Directive({\n    selector: '[tuiAccordionItemContent]',\n})\nexport class TuiAccordionItemContentDirective extends PolymorpheusTemplate<{}> {\n    constructor(\n        @Inject(TemplateRef)\n        @Self()\n        templateRef: TemplateRef<{}>,\n        @Inject(ChangeDetectorRef) changeDetectorRef: ChangeDetectorRef,\n    ) {\n        super(templateRef, changeDetectorRef);\n    }\n}\n","import {\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    ContentChild,\n    ElementRef,\n    EventEmitter,\n    forwardRef,\n    HostBinding,\n    Inject,\n    Input,\n    Output,\n    ViewChild,\n} from '@angular/core';\nimport {\n    AbstractTuiInteractive,\n    isNativeFocused,\n    TUI_FOCUSABLE_ITEM_ACCESSOR,\n    tuiDefaultProp,\n    TuiFocusableElementAccessor,\n    TuiNativeFocusableElement,\n} from '@taiga-ui/cdk';\nimport {MODE_PROVIDER, TUI_MODE, TuiBrightness, TuiSizeS} from '@taiga-ui/core';\nimport {TuiBorders} from '@taiga-ui/kit/enums';\nimport {Observable} from 'rxjs';\nimport {TuiAccordionItemContentDirective} from './accordion-item-content.directive';\n\n@Component({\n    selector: 'tui-accordion-item',\n    templateUrl: './accordion-item.template.html',\n    styleUrls: ['./accordion-item.style.less'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [\n        {\n            provide: TUI_FOCUSABLE_ITEM_ACCESSOR,\n            useExisting: forwardRef(() => TuiAccordionItemComponent),\n        },\n        MODE_PROVIDER,\n    ],\n    host: {\n        '($.data-mode.attr)': 'mode$',\n    },\n})\nexport class TuiAccordionItemComponent\n    extends AbstractTuiInteractive\n    implements TuiFocusableElementAccessor {\n    @Input()\n    @HostBinding('class._no-padding')\n    @tuiDefaultProp()\n    noPadding = false;\n\n    @Input()\n    @HostBinding('class._has-arrow')\n    @tuiDefaultProp()\n    showArrow = true;\n\n    @Input()\n    @HostBinding('attr.data-tui-host-borders')\n    @tuiDefaultProp()\n    borders: TuiBorders | null = TuiBorders.All;\n\n    @Input()\n    @HostBinding('attr.data-tui-host-size')\n    @tuiDefaultProp()\n    size: TuiSizeS = 'm';\n\n    @Input()\n    @HostBinding('class._disabled')\n    @tuiDefaultProp()\n    disabled = false;\n\n    @Input()\n    @tuiDefaultProp()\n    disableHover = false;\n\n    @Input()\n    @tuiDefaultProp()\n    open = false;\n\n    @Input()\n    @tuiDefaultProp()\n    async = false;\n\n    @Output()\n    readonly openChange = new EventEmitter<boolean>();\n\n    @ContentChild(TuiAccordionItemContentDirective)\n    readonly content?: TuiAccordionItemContentDirective;\n\n    @ViewChild('focusableElement')\n    private readonly focusableElement?: ElementRef<TuiNativeFocusableElement>;\n\n    constructor(\n        @Inject(ChangeDetectorRef) private readonly changeDetectorRef: ChangeDetectorRef,\n        @Inject(TUI_MODE) readonly mode$: Observable<TuiBrightness | null>,\n    ) {\n        super();\n    }\n\n    get nativeFocusableElement(): TuiNativeFocusableElement | null {\n        return this.disabled || !this.focusableElement\n            ? null\n            : this.focusableElement.nativeElement;\n    }\n\n    get focused(): boolean {\n        return isNativeFocused(this.nativeFocusableElement);\n    }\n\n    onHovered(hovered: boolean) {\n        if (!this.disableHover) {\n            this.updateHovered(hovered);\n        }\n    }\n\n    onFocused(focused: boolean) {\n        this.updateFocused(focused);\n    }\n\n    onFocusVisible(focusVisible: boolean) {\n        this.updateFocusVisible(focusVisible);\n    }\n\n    onRowToggle() {\n        if (this.disabled) {\n            return;\n        }\n\n        this.updateOpen(!this.open);\n    }\n\n    onItemKeyDownEsc(event: KeyboardEvent) {\n        if (!this.focused || !this.open) {\n            return;\n        }\n\n        event.stopPropagation();\n        this.updateOpen(false);\n    }\n\n    onItemKeyDownSpace(event: KeyboardEvent) {\n        if (!this.focused) {\n            return;\n        }\n\n        event.preventDefault();\n        this.onRowToggle();\n    }\n\n    close() {\n        this.updateOpen(false);\n        this.changeDetectorRef.markForCheck();\n    }\n\n    private updateOpen(open: boolean) {\n        if (this.open === open) {\n            return;\n        }\n\n        this.open = open;\n        this.openChange.emit(open);\n    }\n}\n","import {\n    AfterContentInit,\n    ChangeDetectionStrategy,\n    Component,\n    ContentChildren,\n    Inject,\n    Input,\n    QueryList,\n} from '@angular/core';\nimport {\n    EMPTY_QUERY,\n    identity,\n    isPresent,\n    itemsQueryListObservable,\n    tuiDefaultProp,\n    TuiDestroyService,\n} from '@taiga-ui/cdk';\nimport {merge} from 'rxjs';\nimport {filter, map, mapTo, pairwise, switchMap, takeUntil} from 'rxjs/operators';\nimport {TuiAccordionItemComponent} from './accordion-item/accordion-item.component';\n\n@Component({\n    selector: 'tui-accordion',\n    styleUrls: ['./accordion.style.less'],\n    templateUrl: 'accordion.template.html',\n    changeDetection: ChangeDetectionStrategy.OnPush,\n    providers: [TuiDestroyService],\n})\nexport class TuiAccordionComponent implements AfterContentInit {\n    @Input()\n    @tuiDefaultProp()\n    closeOthers = true;\n\n    @Input()\n    @tuiDefaultProp()\n    rounded = true;\n\n    @ContentChildren(TuiAccordionItemComponent)\n    readonly accordionItems: QueryList<TuiAccordionItemComponent> = EMPTY_QUERY;\n\n    constructor(\n        @Inject(TuiDestroyService)\n        private readonly destroy$: TuiDestroyService,\n    ) {}\n\n    ngAfterContentInit() {\n        const {accordionItems} = this;\n        const rows$ = itemsQueryListObservable(accordionItems);\n        const newOpenRow$ = rows$.pipe(\n            pairwise(),\n            map(([previous, current]) =>\n                current.find(item => previous.indexOf(item) === -1 && item.open),\n            ),\n            filter(isPresent),\n        );\n        const rowsOpen$ = merge(\n            rows$.pipe(\n                switchMap(rows =>\n                    merge(\n                        ...rows.map(row =>\n                            row.openChange.pipe(filter(identity), mapTo(row)),\n                        ),\n                    ),\n                ),\n            ),\n            newOpenRow$,\n        ).pipe(\n            filter(() => this.closeOthers),\n            takeUntil(this.destroy$),\n        );\n\n        rowsOpen$.subscribe(currentRow => {\n            accordionItems.forEach(row => {\n                if (currentRow !== row) {\n                    row.close();\n                }\n            });\n        });\n    }\n}\n","import {CommonModule} from '@angular/common';\nimport {NgModule} from '@angular/core';\nimport {\n    TuiFocusableModule,\n    TuiFocusedModule,\n    TuiFocusVisibleModule,\n    TuiHoveredModule,\n} from '@taiga-ui/cdk';\nimport {TuiExpandModule, TuiGroupModule, TuiSvgModule} from '@taiga-ui/core';\nimport {PolymorpheusModule} from '@tinkoff/ng-polymorpheus';\nimport {TuiAccordionItemContentDirective} from './accordion-item/accordion-item-content.directive';\nimport {TuiAccordionItemComponent} from './accordion-item/accordion-item.component';\nimport {TuiAccordionComponent} from './accordion.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        TuiFocusedModule,\n        TuiFocusVisibleModule,\n        TuiFocusableModule,\n        TuiHoveredModule,\n        PolymorpheusModule,\n        TuiSvgModule,\n        TuiGroupModule,\n        TuiExpandModule,\n    ],\n    declarations: [\n        TuiAccordionComponent,\n        TuiAccordionItemComponent,\n        TuiAccordionItemContentDirective,\n    ],\n    exports: [\n        TuiAccordionComponent,\n        TuiAccordionItemComponent,\n        TuiAccordionItemContentDirective,\n    ],\n})\nexport class TuiAccordionModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}